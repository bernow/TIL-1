# [ Python Basic Grammer_7 ]

## < 파이썬 정규 표현식(Regular Expression formula) >

- 참고 사이트 : [파이썬 하우투](https://docs.python.org/3.4/howto/regex.html)
- 정규 표현식
  - 정의 : 복잡한 문자열을 처리할 때 사용하는 기법
  - 파이썬만이 아닌 문자열 처리하는 모든 곳에서 사용

### 1. 정규 표현식의 필요성

```visual basic
- 다음의 문제가 주어졌을 경우
: 주민등록번호를 포함하고 있는 텍스트가 있다. 이 텍스트에 포함된 모든 주민등록번호의 뒷자리를 * 문자로 변경하시오.
```

- 프로그램 작성 순서
  1. 전체 텍스트를 공백 문자로 나눈다(split).
  2. 나누어진 단어들이 주민등록번호 형식인지 조사한다.
  3. 단어가 주민등록번호 형식이라면 뒷자리를 '*'로 변환한다.
  4. 나누어진 단어들을 다시 조립한다.

```python
- 기존 코드
data = """
park 800905-1049118
kim 700905-1059119
"""

result = []
for line in data.split("\n"):
    word_result=[]
    for word in line.split(" "):
        if len(word) == 14 and word[:6].isdigit() and word[7:].isdigit():
            word = word[:6] + "-" + "*******"
        word_result.append(word)
    result.append(" ".join(word_result))
print("\n".join(result))

결과값:
park 800905-*******
kim 700905-*******
```

```python
- 정규식을 사용한 간편하고 직관적인 코드
import re <- 정규 표현식을 사용하기 위한 re모듈

data = """
park 800905-1049118
kim 700905-1059119
"""

pat = re.compile("(\d{6})[-]\d{7}")
print(pat.sub("\g<1>-*******", data))

결과값:
park 800905-*******
kim 700905-*******
```

### 2. 정규 표현식 시작하기

- 정규 표현식으 기초, 메타 문자

  - 메타 문자 종류 : .^$*+?{}[]\\|()

  - 문자 클래스 []

    - '[와 ] 사이의 문자들과 매치' 라는 의미

    - []안의 두 문자 사이에 하이픈(-)을 사용하면 두 문자 사이의 범위를 의미

      - [a-zA-Z] : 알파벳 모두
      - [0-9] : 숫자

      | 정규식 | 문자열 | 매치 여부 | 설명                                                         |
      | ------ | ------ | --------- | ------------------------------------------------------------ |
      | [abc]  | a      | Yes       | "a"는 정규식과 일치하는 문자인 "a"가 있으므로 매치           |
      |        | before | Yes       | "before"는 정규식과 일치하는 문자인 "b"가 있으므로 매치      |
      |        | dude   | No        | "dude"는 정규식과 일치하는 문자인 a,b,c 중 어느 하나도 포함하고 있지 않으므로 매치되지 않음 |

    - 자주 사용하는 문자 클래스

      | 정규 표현식 | 설명                                                         |
      | ----------- | ------------------------------------------------------------ |
      | \d          | 숫자와 매치, [0-9]와 동일한 표현식                           |
      | \D          | 숫자가 아닌 것과 매치, `[^0-9]`와 동일한 표현식              |
      | \s          | whitespace 문자와 매치, [\t\n\r\f\v]와 동일한 표현식.<br />맨 앞의 빈 칸은 공백 문자(space)를 의미 |
      | \S          | whitespace 문자가 아닌 것과 매치, `[^\t\n\r\f\v]`와 동일한 표현식 |
      | \w          | 문자+숫자와 매치, [a-zA-Z0-9]와 동일한 표현식                |
      | \W          | 문자+숫자가 아닌 문자와 매치, `[^a-zA-Z0-9]`와 동일한 표현식 |

  - Dot(.)

    - 정의 : 줄바꿈 문자인 \n를 제외한 모든 문자와 매치됨을 의미

      ```
      a.b --> a와 b사이에 줄바꿈 문자를 제외한 어떤 문자가 들어가도 모두 매치
      (==)"a + 모든 문자 + b" : a와 b라는 문자 사이에 어떤 문자가 들어가도 매치
      
      a[.]b --> a와 b사이에 Dot(.) 문자가 있으면 매치
      (==)"a + Dot(.)문자 + b" : "a.b"라는 문자열과 매치, "a0b"라는 문자여로가 매치되지 않음
      ```

      | 정규식 | 문자열 | 매치 여부 | 설명                                                         |
      | ------ | ------ | --------- | ------------------------------------------------------------ |
      | a.b    | aab    | Yes       | "aab"는 가운데 문자 "a"가 모든 문자를 의미하는 .과 일치하므로 정규식과 매치 |
      |        | a0b    | Yes       | "a0b"는 가운데 문자 "0"이 모든 문자를 의미하는 .과 일치하므로 정규식과 매치 |
      |        | abc    | No        | "abc"는 "a"문자와 "b"문자 사이에 어떤 문자라도 하나는 있어야 하는 이 정규식과 일치하지 않으므로 매치되지 않음 |

  - 반복(*)

    - 정의 : * 메타 문자가 사용. * 바로 앞에 있는 문자가 0부터 무한대로 반복될 수 있다는 의미

    - 예 : ca*t -> * 문자 앞의 a가 0번 이상 반복되면 매치

      | 정규식 | 문자열 | 매치 여부 | 설명                                   |
      | ------ | ------ | --------- | -------------------------------------- |
      | ca*t   | ct     | Yes       | "a"가 0번 반복되어 매치                |
      |        | cat    | Yes       | "a"가 0번 이상 반복되어 매치(1번 반복) |
      |        | caaat  | Yes       | "a"가 0번 이상 반복되어 매치(3번 반복) |

      

  - 반복(+)

    - 정의 : + 문자 앞에 있는 문자가 1번 이상 반복되면 매치

      | 정규식 | 문자열 | 매치 여부 | 설명                                   |
      | ------ | ------ | --------- | -------------------------------------- |
      | ca+t   | ct     | No        | "a"가 0번 반복되어 매치되지 않음       |
      |        | cat    | Yes       | "a"가 1번 이상 반복되어 매치(1번 반복) |
      |        | caaat  | Yes       | "a"가 1번 이상 반복되어 매치(3번 반복) |

      

  - 반복({m, n}, ?)

    - 정의 : 반복 횟수를 고정시킬 경우에 사용. m부터 n까지로 고정하여 매치, m 또는 n을 생략할 수 도 있다

    1. {m}

       | 정규식 | 문자열 | 매치 여부 | 설명                               |
       | ------ | ------ | --------- | ---------------------------------- |
       | ca{2}t | cat    | No        | "a"가 1번만 반복되어 매치되지 않음 |
       |        | caat   | Yes       | "a"가 2번 반복되어 매치            |

    2. {m ,n}

       | 정규식   | 문자열  | 매치 여부 | 설명                               |
       | -------- | ------- | --------- | ---------------------------------- |
       | ca{2,5}t | cat     | No        | "a"가 1번만 반복되어 매치되지 않음 |
       |          | caat    | Yes       | "a"가 2번 반복되어 매치            |
       |          | caaaaat | Yes       | "a"가 5번 반복되어 매치            |

    3. ?

       | 정규식 | 문자열 | 매치 여부 | 설명                    |
       | ------ | ------ | --------- | ----------------------- |
       | ab?c   | abc    | Yes       | "b"가 1번 사용되어 매치 |
       |        | ac     | Yes       | "b"가 0번 사용되어 매치 |

- 파이썬에서 정규 표현식을 지원하는 re 모듈

  - 정의 : 파이썬이 설치될때 자동으로 설치되는 기본 라이브러리

    ```python
    >>> import re
    >>> p = re.comiple('ab*')
    ==> re.compile의 결과로 리턴되는 객체 p(컴파일된 패턴 객체)를 이용해 그 이후의 작업을 수행
    - 패턴 : 정규식을 컴파일한 결과를 말함
    ```

### 3. 강력한 정규 표현식의 세계